<!DOCTYPE html><html lang="en"> 
<!-- Mirrored from kamranahmed.info/posts/port-knocking-explained by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 30 Sep 2025 06:11:41 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width"><link rel="icon" type="image/svg+xml" href="../favicon.svg"><title>Practical Guide to Port Knocking - cs.fyi</title><meta name="description" content="Learn what port knocking is and how to implement it using Knockd."><link rel="preconnect" href="https://www.google-analytics.com/"><link rel="stylesheet" href="../_astro/background-less.BKeRS0Lf.css">
<style>@keyframes fade-appear{0%{border-radius:.5rem;--tw-bg-opacity: 1;background-color:rgb(55 65 81 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(254 249 195 / var(--tw-text-opacity))}}@keyframes slide-fade-up-in{0%{opacity:0;transform:translateY(.5rem)}to{opacity:1;transform:translateY(0)}}[data-rmiz-modal-content]{--tw-bg-opacity: 1;background-color:rgb(24 24 27 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(243 244 246 / var(--tw-text-opacity))}::-moz-selection{--tw-bg-opacity: 1;background-color:rgb(250 204 21 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(113 63 18 / var(--tw-text-opacity))}::selection{--tw-bg-opacity: 1;background-color:rgb(250 204 21 / var(--tw-bg-opacity));--tw-text-opacity: 1;color:rgb(113 63 18 / var(--tw-text-opacity))}
</style><script type="module">window.fireEvent=e=>{const{action:n,category:t,label:a,value:i}=e;if(!window.gtag){console.warn("Missing GTAG - Analytics disabled");return}window.gtag("event",n,{event_category:t,event_label:a,value:i})};
</script>
<script type="module" src="../_astro/page.DFwqf4PB.js"></script></head> <body class="bg-zinc-900 text-zinc-400"> <div class="mx-auto max-w-[750px] px-4 pb-20 pt-6 text-lg sm:px-12 md:px-16"> <div class="flex items-center justify-between gap-5 rounded-3xl border border-zinc-700/40 bg-zinc-800 px-5 text-base sm:px-6"> <style>astro-island,astro-slot,astro-static-slot{display:contents}</style><script>(()=>{var e=async t=>{await(await t())()};(self.Astro||(self.Astro={})).load=e;window.dispatchEvent(new Event("astro:load"));})();;(()=>{var A=Object.defineProperty;var g=(i,o,a)=>o in i?A(i,o,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[o]=a;var d=(i,o,a)=>g(i,typeof o!="symbol"?o+"":o,a);{let i={0:t=>m(t),1:t=>a(t),2:t=>new RegExp(t),3:t=>new Date(t),4:t=>new Map(a(t)),5:t=>new Set(a(t)),6:t=>BigInt(t),7:t=>new URL(t.html),8:t=>new Uint8Array(t),9:t=>new Uint16Array(t),10:t=>new Uint32Array(t)},o=t=>{let[l,e]=t;return l in i?i[l](e):void 0},a=t=>t.map(o),m=t=>typeof t!="object"||t===null?t:Object.fromEntries(Object.entries(t).map(([l,e])=>[l,o(e)]));class y extends HTMLElement{constructor(){super(...arguments);d(this,"Component");d(this,"hydrator");d(this,"hydrate",async()=>{var b;if(!this.hydrator||!this.isConnected)return;let e=(b=this.parentElement)==null?void 0:b.closest("astro-island[ssr]");if(e){e.addEventListener("astro:hydrate",this.hydrate,{once:!0});return}let c=this.querySelectorAll("astro-slot"),n={},h=this.querySelectorAll("template[data-astro-template]");for(let r of h){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("data-astro-template")||"default"]=r.innerHTML,r.remove())}for(let r of c){let s=r.closest(this.tagName);s!=null&&s.isSameNode(this)&&(n[r.getAttribute("name")||"default"]=r.innerHTML)}let p;try{p=this.hasAttribute("props")?m(JSON.parse(this.getAttribute("props"))):{}}catch(r){let s=this.getAttribute("component-url")||"<unknown>",v=this.getAttribute("component-export");throw v&&(s+=` (export ${v})`),console.error(`[hydrate] Error parsing props for component ${s}`,this.getAttribute("props"),r),r}let u;await this.hydrator(this)(this.Component,p,n,{client:this.getAttribute("client")}),this.removeAttribute("ssr"),this.dispatchEvent(new CustomEvent("astro:hydrate"))});d(this,"unmount",()=>{this.isConnected||this.dispatchEvent(new CustomEvent("astro:unmount"))})}disconnectedCallback(){document.removeEventListener("astro:after-swap",this.unmount),document.addEventListener("astro:after-swap",this.unmount,{once:!0})}connectedCallback(){if(!this.hasAttribute("await-children")||document.readyState==="interactive"||document.readyState==="complete")this.childrenConnectedCallback();else{let e=()=>{document.removeEventListener("DOMContentLoaded",e),c.disconnect(),this.childrenConnectedCallback()},c=new MutationObserver(()=>{var n;((n=this.lastChild)==null?void 0:n.nodeType)===Node.COMMENT_NODE&&this.lastChild.nodeValue==="astro:end"&&(this.lastChild.remove(),e())});c.observe(this,{childList:!0}),document.addEventListener("DOMContentLoaded",e)}}async childrenConnectedCallback(){let e=this.getAttribute("before-hydration-url");e&&await import(e),this.start()}async start(){let e=JSON.parse(this.getAttribute("opts")),c=this.getAttribute("client");if(Astro[c]===void 0){window.addEventListener(`astro:${c}`,()=>this.start(),{once:!0});return}try{await Astro[c](async()=>{let n=this.getAttribute("renderer-url"),[h,{default:p}]=await Promise.all([import(this.getAttribute("component-url")),n?import(n):()=>()=>{}]),u=this.getAttribute("component-export")||"default";if(!u.includes("."))this.Component=h[u];else{this.Component=h;for(let f of u.split("."))this.Component=this.Component[f]}return this.hydrator=p,this.hydrate},e,this)}catch(n){console.error(`[astro-island] Error hydrating ${this.getAttribute("component-url")}`,n)}}attributeChangedCallback(){this.hydrate()}}d(y,"observedAttributes",["props"]),customElements.get("astro-island")||customElements.define("astro-island",y)}})();</script><astro-island uid="ZursTB" prefix="r0" component-url="/_astro/MobileNav.DoOW3-tu.js" component-export="MobileNav" renderer-url="/_astro/client.BStqXOaq.js" props="{}" ssr="" client="load" opts="{&quot;name&quot;:&quot;MobileNav&quot;,&quot;value&quot;:true}" await-children=""><div class="relative block sm:hidden"><button type="button" class="flex items-center py-3 text-sm transition-colors hover:text-zinc-300 sm:hidden sm:text-base"><svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" x2="20" y1="12" y2="12"></line><line x1="4" x2="20" y1="6" y2="6"></line><line x1="4" x2="20" y1="18" y2="18"></line></svg><span> </span></button></div><!--astro:end--></astro-island> <div class="hidden items-center gap-6 sm:flex"> <a class="relative flex items-center gap-2 py-3 pr-1 text-sm transition-colors hover:text-zinc-300 sm:text-base" href="../index.html" target="_self" data-astro-prefetch="load"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-house"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"></path><path d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path></svg>Home</a> <a class="relative flex items-center gap-2 py-3 pr-1 text-sm transition-colors hover:text-zinc-300 sm:text-base" href="../work.html" target="_self" data-astro-prefetch="load"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-briefcase"><path d="M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path><rect width="20" height="14" x="2" y="6" rx="2"></rect></svg>Work</a> <a class="relative flex items-center gap-2 py-3 pr-1 text-sm transition-colors hover:text-zinc-300 sm:text-base" href="../projects.html" target="_self" data-astro-prefetch="load"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-folder"><path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z"></path></svg>Projects</a> <a class="relative flex items-center gap-2 py-3 pr-1 text-sm transition-colors hover:text-zinc-300 sm:text-base" href="../posts.html" target="_self" data-astro-prefetch="load"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-book-text"><path d="M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20"></path><path d="M8 11h8"></path><path d="M8 7h6"></path></svg>Posts<span class="absolute -bottom-px left-0 right-0 h-px bg-gradient-to-r from-zinc-400/0 via-zinc-400/40 to-zinc-400/0"></span></a> </div> <a class="relative flex items-center gap-2 py-3 pr-1 text-sm transition-colors hover:text-zinc-300 sm:text-base" href="../cdn-cgi/l/email-protection.html#d9b2b8b4abb8b7b8b1b4bcbdf7aabc99beb4b8b0b5f7bab6b4" target="_self" data-astro-prefetch="load"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path></svg>Say Hi</a> </div> <div>  <div class="container"> <div class="mb-6 mt-12"> <h1 class="mb-2 text-balance text-4xl font-bold leading-tight text-neutral-100"> Practical Guide to Port Knocking </h1> <p class="text-base text-neutral-400"> March 14, 2023 </p> </div> <div class="prose prose-img:bg-white prose-img:px-2 prose-img:py-2 prose-img:rounded-md prose-lg prose-quoteless prose-blockquote:text-zinc-300 prose-blockquote:border-l-8 prose-blockquote:border-l-current prose-blockquote:font-normal prose-neutral-300 prose-h3:text-neutral-100 prose-h4:text-neutral-100 prose-h2:text-neutral-100 prose-code:font-normal prose-code:before:hidden prose-code:after:hidden prose-a:text-blue-300 prose-code:text-yellow-200 prose-strong:text-white prose-h1:text-balance prose-h2:text-balance prose-h3:text-balance prose-h4:text-balance prose-h5:text-balance leading-relaxed text-neutral-300"> <p>If you’re running a remote server over the internet, you know that it’s crucial to maintain security to prevent unauthorized access. Most remote servers are protected by a firewall that only allows data to pass through specific, numbered ports. However, having open ports may expose your server to potential risks as attackers can easily spot them and try to gain unlawful access.</p>
<p>That’s where port knocking comes into play - it’s a technique that enables you to keep your ports closed while still allowing authorized users to connect to your server. In this article, we’ll delve deep into the concept of port knocking, how it works, and how to implement it using Knockd, a Linux-based port-knocking utility.</p>
<h3 id="how-does-port-knocking-work">How Does Port Knocking Work?</h3>
<p>In general, when you want to connect to a remote server, you send some data over the network to an IP address of the server, specifically to a numbered port at that IP address. The open ports on the server’s network are then exposed to the internet.</p>
<p>With port knocking, you can configure your server to have no open ports at all. Instead, it will only open a port for a brief period when there is a specific sequence of connection requests sent to it. This makes it challenging for an attacker to identify the open ports and gain access to your system.</p>
<h3 id="using-knockd-to-configure-port-knocking">Using Knockd to Configure Port Knocking</h3>
<p>To get started with implementing port knocking, we will need to use Knockd, a lightweight port-knocking utility. Knockd is widely used in the Linux community and is easy to configure.</p>
<p>Firstly, we need to configure Knockd by specifying the sequence of connection requests that it needs to listen for.</p>
<p>Here is an example of a configuration file with two sequences that will open port <code>8888</code> if Knockd sees a sequence of requests on port <code>7000</code>, <code>8000</code>, and then <code>9000</code>, all within five seconds. The second rule does the opposite, closing port <code>8888</code> if it receives the opposite sequence.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="ini"><code><span class="line"><span style="color:#B392F0">[options]</span><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#F97583">    logfile</span><span style="color:#E1E4E8"> = /var/log/knockd.log  </span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#B392F0">[openSSH]</span><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#F97583">    sequence</span><span style="color:#E1E4E8">      = 7000,8000,9000  </span></span>
<span class="line"><span style="color:#F97583">    seq_timeout</span><span style="color:#E1E4E8">   = 5  </span></span>
<span class="line"><span style="color:#F97583">    tcpflags</span><span style="color:#E1E4E8">      = syn  </span></span>
<span class="line"><span style="color:#F97583">    command</span><span style="color:#E1E4E8">       = /sbin/iptables -I INPUT 1 -s %IP% -p tcp --dport 22 -j ACCEPT  </span></span>
<span class="line"><span style="color:#F97583">    tcpport</span><span style="color:#E1E4E8">       = 22  </span></span>
<span class="line"><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#B392F0">[closeSSH]</span><span style="color:#E1E4E8">  </span></span>
<span class="line"><span style="color:#F97583">    sequence</span><span style="color:#E1E4E8">      = 9000,8000,7000  </span></span>
<span class="line"><span style="color:#F97583">    seq_timeout</span><span style="color:#E1E4E8">   = 5  </span></span>
<span class="line"><span style="color:#F97583">    tcpflags</span><span style="color:#E1E4E8">      = syn  </span></span>
<span class="line"><span style="color:#F97583">    command</span><span style="color:#E1E4E8">       = /sbin/iptables -D INPUT -s %IP% -p tcp --dport 22 -j ACCEPT  </span></span>
<span class="line"><span style="color:#F97583">    tcpport</span><span style="color:#E1E4E8">       = 22</span></span>
<span class="line"></span></code></pre>
<p>As you can see from the file, the rules listen for a specific sequence of connection requests, then use IPtables to add or remove rules to open or close the specified port.</p>
<h3 id="example-implementation-of-knockd">Example Implementation of Knockd</h3>
<p>Now that we understand how Knockd works, let’s see how we can implement it in a real-world scenario. We’ll then use Knockd to configure port knocking so that the port is only open when we send a specific sequence of connection requests.</p>
<p>Create a new directory where you want to store your files. Then, create a file called <code>Dockerfile</code> will following content</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="dockerfile"><code><span class="line"><span style="color:#F97583">FROM</span><span style="color:#E1E4E8"> python:3.8-alpine</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> apk add --no-cache \</span></span>
<span class="line"><span style="color:#E1E4E8">  iptables \</span></span>
<span class="line"><span style="color:#E1E4E8">  knock</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> ./entrypoint.sh ./</span></span>
<span class="line"><span style="color:#F97583">RUN</span><span style="color:#E1E4E8"> chmod +x ./entrypoint.sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> knockd.conf /etc/knockd.conf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">COPY</span><span style="color:#E1E4E8"> ./index.html ./</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583">CMD</span><span style="color:#E1E4E8"> [ </span><span style="color:#9ECBFF">"./entrypoint.sh"</span><span style="color:#E1E4E8"> ]</span></span>
<span class="line"></span></code></pre>
<p>The Dockerfile installs Knockd and IPtables, then copies in our configuration files and starts everything up using an entrypoint script.</p>
<p>Next, create a simple <code>Makefile</code> with the following content</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="makefile"><code><span class="line"><span style="color:#B392F0">build</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">	docker build -t port-knock-demo .</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">run</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">	docker run -d </span><span style="color:#79B8FF">\</span></span>
<span class="line"><span style="color:#E1E4E8">	  --rm --privileged </span><span style="color:#79B8FF">\</span></span>
<span class="line"><span style="color:#E1E4E8">		-p 8000:8000 </span><span style="color:#79B8FF">\</span></span>
<span class="line"><span style="color:#E1E4E8">		-p 7000:7000 </span><span style="color:#79B8FF">\</span></span>
<span class="line"><span style="color:#E1E4E8">		-p 9000:9000 </span><span style="color:#79B8FF">\</span></span>
<span class="line"><span style="color:#E1E4E8">		-p 8888:8888 </span><span style="color:#79B8FF">\</span></span>
<span class="line"><span style="color:#E1E4E8">		--name port-knock-demo </span><span style="color:#79B8FF">\</span></span>
<span class="line"><span style="color:#E1E4E8">		port-knock-demo</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">unlock</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#F97583">	-</span><span style="color:#E1E4E8">telnet 127.0.0.1 7000</span></span>
<span class="line"><span style="color:#F97583">	-</span><span style="color:#E1E4E8">telnet 127.0.0.1 8000</span></span>
<span class="line"><span style="color:#F97583">	-</span><span style="color:#E1E4E8">telnet 127.0.0.1 9000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">lock</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#F97583">	-</span><span style="color:#E1E4E8">telnet 127.0.0.1 9000</span></span>
<span class="line"><span style="color:#F97583">	-</span><span style="color:#E1E4E8">telnet 127.0.0.1 8000</span></span>
<span class="line"><span style="color:#F97583">	-</span><span style="color:#E1E4E8">telnet 127.0.0.1 7000</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">test</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">	curl -m 1 127.0.0.1:8888</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0">view-logs</span><span style="color:#E1E4E8">:</span></span>
<span class="line"><span style="color:#E1E4E8">	docker exec port-knock-demo cat /var/log/knockd.log</span></span>
<span class="line"></span></code></pre>
<p>Next, create a file called <code>entrypoint.sh</code> with the following content</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#6A737D">#!/bin/sh</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D"># NOTE: Docker opens up port 8888 because I am port forwarding</span></span>
<span class="line"><span style="color:#6A737D"># to it in my docker run command so I have to reclose it here</span></span>
<span class="line"><span style="color:#B392F0">/sbin/iptables</span><span style="color:#79B8FF"> -A</span><span style="color:#9ECBFF"> INPUT</span><span style="color:#79B8FF"> -p</span><span style="color:#9ECBFF"> tcp</span><span style="color:#79B8FF"> --dport</span><span style="color:#79B8FF"> 8888</span><span style="color:#79B8FF"> -j</span><span style="color:#9ECBFF"> DROP</span><span style="color:#E1E4E8"> &#x26; </span><span style="color:#79B8FF">\</span></span>
<span class="line"><span style="color:#B392F0">  knockd</span><span style="color:#E1E4E8"> &#x26; </span><span style="color:#79B8FF">\</span></span>
<span class="line"><span style="color:#B392F0">  python</span><span style="color:#79B8FF"> -m</span><span style="color:#9ECBFF"> http.server</span><span style="color:#79B8FF"> 8888</span></span>
<span class="line"></span></code></pre>
<p>The contents of <code>knockd.conf</code> are the same as the example above.</p>
<p>Finally, create a file called <code>index.html</code> with the following content</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="html"><code><span class="line"><span style="color:#E1E4E8">&#x3C;!</span><span style="color:#85E89D">DOCTYPE</span><span style="color:#B392F0"> html</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;</span><span style="color:#85E89D">html</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">head</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">title</span><span style="color:#E1E4E8">>Port Knocking Demo&#x3C;/</span><span style="color:#85E89D">title</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">head</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;</span><span style="color:#85E89D">body</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">h1</span><span style="color:#E1E4E8">>Port Knocking Demo&#x3C;/</span><span style="color:#85E89D">h1</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">    &#x3C;</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">>This is a demo of port knocking.&#x3C;/</span><span style="color:#85E89D">p</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">  &#x3C;/</span><span style="color:#85E89D">body</span><span style="color:#E1E4E8">></span></span>
<span class="line"><span style="color:#E1E4E8">&#x3C;/</span><span style="color:#85E89D">html</span><span style="color:#E1E4E8">></span></span>
<span class="line"></span></code></pre>
<p>Now you can build and run the Docker container using the following commands.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">make</span><span style="color:#9ECBFF"> build</span></span>
<span class="line"><span style="color:#B392F0">make</span><span style="color:#9ECBFF"> run</span></span>
<span class="line"></span></code></pre>
<p>Once the container is up, we can test our port knocking process by attempting to connect to our Python server on port <code>8888</code>.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">make</span><span style="color:#9ECBFF"> test</span></span>
<span class="line"></span></code></pre>
<p>However, since that port is closed currently, it won’t work. We then fire off a sequence of telnet requests on port <code>7000</code>, <code>8000</code>, and <code>9000</code>.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">make</span><span style="color:#9ECBFF"> unlock</span></span>
<span class="line"></span></code></pre>
<p>Now, we can test the connection again and it should work.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">make</span><span style="color:#9ECBFF"> test</span></span>
<span class="line"></span></code></pre>
<p>To re-lock the port, we just send those same telnet requests in the reverse order, <code>9000, </code>8000, <code>7000</code>.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">make</span><span style="color:#9ECBFF"> lock</span></span>
<span class="line"></span></code></pre>
<p>Now, the server will no longer listen to the port and our request will timeout.</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0" data-language="bash"><code><span class="line"><span style="color:#B392F0">make</span><span style="color:#9ECBFF"> test</span></span>
<span class="line"></span></code></pre>
<h3 id="conclusion">Conclusion</h3>
<p>Port knocking is a simple yet effective way to enhance network security by closing your server’s ports until it receives a specific sequence of connection requests. It can be implemented quickly and easily using Knockd, which is lightweight and easy to configure.</p>
<p>By following the steps above, you should be able to implement port knocking on your own systems with ease. However, it’s good to remember that port knocking should be viewed as one component of broader network security strategy rather than the sole solution.</p> </div> </div>  </div> </div>  <script data-cfasync="false" src="../cdn-cgi/scripts/5c5dd728/cloudflare-static/email-decode.min.js"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-139582634-1"></script> <script>
    // @ts-nocheck
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());
    gtag('config', 'UA-58155965-1');
</script> <script type="text/javascript">
  (function (C, A, L) {
    let p = function (a, ar) {
      a.q.push(ar);
    };
    let d = C.document;
    C.Cal =
      C.Cal ||
      function () {
        let cal = C.Cal;
        let ar = arguments;
        if (!cal.loaded) {
          cal.ns = {};
          cal.q = cal.q || [];
          d.head.appendChild(d.createElement('script')).src = A;
          cal.loaded = true;
        }
        if (ar[0] === L) {
          const api = function () {
            p(api, arguments);
          };
          const namespace = ar[1];
          api.q = api.q || [];
          typeof namespace === 'string'
            ? (cal.ns[namespace] = api) && p(api, ar)
            : p(cal, ar);
          return;
        }
        p(cal, ar);
      };
  })(window, '../../app.cal.com/embed/embed.js', 'init');
  Cal('init', { origin: 'https://cal.com' });

  Cal('ui', {
    styles: { branding: { brandColor: '#000000' } },
    hideEventTypeDetails: false,
    layout: 'month_view',
  });
</script> </body>
<!-- Mirrored from kamranahmed.info/posts/port-knocking-explained by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 30 Sep 2025 06:11:41 GMT -->
</html>