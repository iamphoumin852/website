"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["packages_chart-card_ChartCard_tsx"],{18883:(e,a,t)=>{t.d(a,{d:()=>ef});var r=t(74848),l=t(36523),i=t(1992),o=t(26108),s=t(5524),n=t(21998),d=t(15042),c=t(57919),p=t(10006),u=t(3803),h=t(38621),y=t(29731),m=t(96540);let C=(0,m.createContext)({}),g=({children:e})=>{let{size:a}=(0,m.useContext)(C);return"sparkline"!==a?(0,r.jsx)(r.Fragment,{children:e}):null};try{g.displayName||(g.displayName="LeadingVisual")}catch{}var b=t(70056),v=t(34164);function f(e){switch(typeof e){case"string":case"number":return e.toString();case"object":if(Array.isArray(e))return e.map(f).join("");if(null!==e&&"props"in e)return f(e.props.children);return"";default:return""}}let x={ChartCardTitleHeading:"Title-module__ChartCardTitleHeading--dMydC"},S=({as:e="h3",sx:a,children:t,className:l})=>{let{setTitle:i,size:o}=(0,m.useContext)(C);return(0,m.useEffect)(()=>{i(f(t))},[i,t]),"sparkline"!==o?(0,r.jsx)(n.DZ,{as:e,sx:a,className:(0,v.$)(l,x.ChartCardTitleHeading),children:t}):null};try{S.displayName||(S.displayName="Title")}catch{}let k={ChartCardDescriptionText:"Description-module__ChartCardDescriptionText--ORwU6"},A=({sx:e,children:a,className:t})=>{let{setDescription:l,size:i}=(0,m.useContext)(C);return(0,m.useEffect)(()=>{l(f(a))},[l,a]),"sparkline"!==i?(0,r.jsx)(n.EY,{sx:e,className:(0,v.$)(t,k.ChartCardDescriptionText),children:a}):null};try{A.displayName||(A.displayName="Description")}catch{}let D=({children:e})=>{let{size:a}=(0,m.useContext)(C);return"sparkline"!==a?(0,r.jsx)(r.Fragment,{children:e}):null};try{D.displayName||(D.displayName="TrailingVisual")}catch{}var N=t(14783),$=t.n(N),_=t(65006),w=t.n(_),j=t(44802),O=t.n(j),M=t(20535),L=t.n(M),T=t(9264),z=t.n(T),V=t(84834),B=t.n(V),W=t(85316),F=t.n(W);let R={ChartCardDialogBody:"ChartCard-module__ChartCardDialogBody--OLQwJ",ChartCardHeaderContainer:"ChartCard-module__ChartCardHeaderContainer--FAjoQ",ChartCardContentContainer:"ChartCard-module__ChartCardContentContainer--NpfuI",ChartCardLeadingVisualContainer:"ChartCard-module__ChartCardLeadingVisualContainer--CFeSn",ChartCardActionsContainer:"ChartCard-module__ChartCardActionsContainer--s_1yW",ChartCardTableContainer:"ChartCard-module__ChartCardTableContainer--JAgMC","-table":"ChartCard-module__-table--sG6MU","-table-header":"ChartCard-module__-table-header--_K3OB","-table-cell":"ChartCard-module__-table-cell--_KZwy",ChartCardSymbol:"ChartCard-module__ChartCardSymbol--HCein","ChartCardSymbol-circle":"ChartCard-module__ChartCardSymbol-circle--c2Ynj","ChartCardSymbol-square":"ChartCard-module__ChartCardSymbol-square--oESib","ChartCardSymbol-diamond":"ChartCard-module__ChartCardSymbol-diamond--MaFMg","ChartCardSymbol-triangle":"ChartCard-module__ChartCardSymbol-triangle--Ljbus","ChartCardSymbol-triangle-down":"ChartCard-module__ChartCardSymbol-triangle-down--z7i8j"},H=["Solid","ShortDash","Dot","DashDot","LongDash","ShortDashDotDot","ShortDot","LongDashDot","Dash","ShortDashDot","LongDashDotDot"],E=["circle","square","diamond","triangle","triangle-down"],P=e=>"datetime"===e?"{value:%b %e}":void 0,I=({xAxis:e,gridLineDashStyle:a,gridLineWidth:t})=>{if(void 0===e)return;let r=e.title;return{gridLineWidth:t,...e,labels:{format:P(e.type),...e.labels},title:{text:r},gridLineDashStyle:a}},J=({yAxis:e,gridLineDashStyle:a,gridLineWidth:t})=>{if(void 0===e)return;let r=Array.isArray(e)?e:[e],l=1===r.length;return r.map(e=>{let r=e.title;return{gridLineWidth:l?t:0,...e,labels:{format:P(e.type),...e.labels},title:{text:r},gridLineDashStyle:a}})},q=({series:e,type:a,hasDashStyle:t=!0})=>(e??[]).map((e,r)=>{let l=H[r%H.length];return{type:a,dashStyle:t?l:"Solid",marker:{symbol:E[r%E.length]},...e}}),G=({plotOptions:e,marker:a,labels:t,stacking:r,noBorderRadius:l=!1})=>({series:{...e,marker:{enabled:a??!1},dataLabels:{enabled:t??!1},lineWidth:2,borderWidth:1.5,stacking:r??void 0,borderRadius:l?0:void 0}}),K=({color:e,borderColor:a,borderShape:t,symbol:r})=>{let l,i=a&&!r.startsWith("triangle")?`border: 1px ${t??"solid"} ${a};`:void 0;if(e&&"object"==typeof e&&"stops"in e){let a=e.stops.map(e=>{let a=e[0],t=e[1];return`${t} ${100*a}%`}).join(", ");l=`background: linear-gradient(0deg, ${a});
        ${i??""}`}else l=`background-color: ${"string"==typeof e?e:"#000"};
      ${i??""}`;return l},U={Solid:"solid",ShortDash:"dashed",Dot:"dotted"},Y={tickWidth:0,lineWidth:0,gridLineColor:"var(--borderColor-muted)",gridLineDashStyle:"Dash",lineColor:"var(--borderColor-default)",stackLabels:{style:{color:"var(--fgColor-default)",fontSize:"var(--text-body-size-small)",textOutline:"1px var(--bgColor-default)"}},labels:{style:{color:"var(--fgColor-muted)",fontSize:"var(--text-body-size-small)"}},title:{style:{color:"var(--fgColor-muted)",fontSize:"var(--text-body-size-small)"}}},Z={accessibility:{keyboardNavigation:{order:["legend","series"]}},colors:["var(--data-blue-color-emphasis, var(--data-blue-color))","var(--data-green-color-emphasis, var(--data-green-color))","var(--data-orange-color-emphasis, var(--data-orange-color))","var(--data-pink-color-emphasis, var(--data-pink-color))","var(--data-yellow-color-emphasis, var(--data-yellow-color))","var(--data-red-color-emphasis, var(--data-red-color))","var(--data-purple-color-emphasis, var(--data-purple-color))","var(--data-auburn-color-emphasis, var(--data-auburn-color))","var(--data-teal-color-emphasis, var(--data-teal-color))","var(--data-gray-color-emphasis, var(--data-gray-color))"],caption:{align:"left",style:{color:"var(--fgColor-muted)"},verticalAlign:"top"},title:{align:"left",style:{color:"var(--fgColor-default)"},text:void 0},tooltip:{backgroundColor:"var(--bgColor-default)",borderRadius:6,borderColor:"var(--borderColor-muted)",borderWidth:1,shape:"rect",padding:10,shadow:{offsetX:2,offsetY:2,opacity:.02,width:4,color:"var(--shadowColor-default)"},style:{color:"var(--fgColor-default)",fontFamily:"var(--fontStack-sansSerif)",fontSize:"var(--text-body-size-small)"},useHTML:!0,headerFormat:'<table style="min-width: 120px;"><tr><th colspan="3" style="color:var(--fgColor-muted, var(--color-fg-muted)); font-weight:var(--base-text-weight-semibold); padding-bottom:2px;">{point.key}</th></tr>',pointFormatter:function(){let e=this.series?.chart?.options?.chart?.type,a=this.series?.options?.marker?.symbol??("column"===e||"bar"===e?"square":"circle"),t=this.series?.options?.dashStyle,r=t&&("column"===e||"bar"===e)?U[t]:void 0,l=this.options?.borderColor??this.series?.options?.borderColor,i=K({color:this.color,borderColor:l,borderShape:r,symbol:a}),o=`ChartCardSymbol-${a}`;return`<tr><td style="padding-top:var(--base-size-4)"><span class="${R.ChartCardSymbol} ${R[o]}" style="${i}"></span> ${this.series.name}</td><td style="text-align: right; padding-top:var(--base-size-4);"><strong>${this.y}</strong></td></tr>`},footerFormat:"</table>"},credits:{enabled:!1},chart:{animation:!1,events:{afterA11yUpdate(){let e=this.container;e?.setAttribute("role","application")}},spacing:[4,0,4,0],backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",style:{fontFamily:"var(--fontStack-sansSerif)",fontSize:"var(--text-body-size-small)",color:"var(--fgColor-default)"}},legend:{itemStyle:{fontSize:"var(--text-body-size-small)",font:"var(--fontStack-sansSerif)",color:"var(--fgColor-default)"},align:"left",verticalAlign:"top",x:-8,y:-12,itemHoverStyle:{color:"var(--fgColor-default)"},title:{style:{color:"var(--fgColor-default)"}}},navigation:{buttonOptions:{enabled:!1}},exporting:{fallbackToExportServer:!1},plotOptions:{series:{animation:!1},spline:{animation:!1},bar:{borderColor:"var(--bgColor-default)"},column:{borderColor:"var(--bgColor-default)"}},xAxis:{tickWidth:0,lineWidth:1,gridLineColor:"var(--borderColor-muted)",gridLineDashStyle:"Dash",lineColor:"var(--borderColor-default)",labels:{style:{color:"var(--fgColor-muted)",fontSize:"var(--text-body-size-small)"}},title:{style:{color:"var(--fgColor-muted)",fontSize:"var(--text-body-size-small)"}}},yAxis:[Y]};var Q=t(4559);function X(e){if(e)return new Intl.DateTimeFormat("sv-SE",{timeZone:"UTC"}).format(new Date(e))}O()($()),L()($()),z()($()),B()($()),O()(w()),L()(w()),z()(w()),B()(w()),function(){let e=$().getOptions().accessibility?.series?.pointDescriptionEnabledThreshold;for(let a of[w(),$()])a.wrap(a.Point.prototype,"highlight",function(t,...r){let l=t.apply(this,r),i=this.series.chart.userOptions.accessibility?.series?.pointDescriptionEnabledThreshold||e;if(i&&"number"==typeof i&&this.series.data.length>i){let e=a.SeriesAccessibilityDescriber.defaultPointDescriptionFormatter(this);(0,Q.i)(e,{assertive:!0})}return l})}(),$().AST.allowedAttributes.push("data-hovercard-url"),$().AST.allowedAttributes.push("data-hovercard-type"),function(){for(let e of[w(),$()])e.wrap(e.Chart.prototype,"getDataRows",function(e,a){let t=e.call(this,a),r=this.xAxis[0]?.min,l=this.xAxis[0]?.max;return r&&l&&(t=t.filter(function(e){return"number"!=typeof e.x||e.x>=r&&e.x<=l})),t})}(),$().setOptions({lang:{decimalPoint:".",thousandsSep:","}}),w().setOptions({lang:{decimalPoint:".",thousandsSep:","}});let ee={xl:"432px",large:"320px",medium:"256px",small:"128px",sparkline:"128px"},ea=({type:e="line",xAxisTitle:a,yAxisTitle:t,useUTC:l=!0,showRangeSelector:i=!1,dataGrouping:o=!1,colors:s,plotOptions:n,series:d,xAxisOptions:c,yAxisOptions:p,tooltipOptions:u,overrideOptionsNotRecommended:h})=>{let{title:y,size:g,chartRef:v}=(0,m.useContext)(C),f=(0,m.useMemo)(()=>s,[s]),x=(0,m.useMemo)(()=>n,[n]),S=(0,m.useMemo)(()=>d,[d]),k=(0,m.useMemo)(()=>c??[],[c]),A=(0,m.useMemo)(()=>p??[],[p]),D=(0,m.useMemo)(()=>u,[u]),N=(0,m.useMemo)(()=>h,[h]),_=S.length>1&&"sparkline"!==g,j=S.length>3,O=x&&function e(a,t,r){if("object"!=typeof a||null===a)return!1;if(a[t]===r)return!0;for(let l in a)if(void 0!==a[l])return e(a[l],t,r);return!1}(x,"stacking","normal"),M=i||o?"stockChart":"chart",L=(0,m.useMemo)(()=>Array.isArray(A)?A:[A],[A]),T=(0,m.useMemo)(()=>"stockChart"===M?w():$(),[M]),z=(0,m.useMemo)(()=>{let r=(0,b.A)({},Z,{accessibility:{...j?{keyboardNavigation:{order:["series","legend"]}}:{},...y?{screenReaderSection:{beforeChartFormat:"<div>{typeDescription}</div><div>{chartSubtitle}</div><div>{chartLongdesc}</div><div>{playAsSoundButton}</div><div>{viewTableButton}</div><div>{xAxisDescription}</div><div>{yAxisDescription}</div><div>{annotationsTitle}{annotationsList}</div>"}}:{}},chart:{type:e,height:"number"==typeof g?g:ee[g],events:{render(){i&&window.setTimeout(()=>{let[e,a]=Array.from(v.current?.container.current?.querySelectorAll(".highcharts-a11y-proxy-group-navigator input[type=range]")||[]),{dataMin:t,dataMax:r,min:l,max:i}=this.xAxis?.[0]||{};e&&a&&void 0!==t&&void 0!==r&&void 0!==l&&void 0!==i&&(e.setAttribute("aria-label","Start of selected range"),e.setAttribute("aria-valuemin",t.toString()),e.setAttribute("aria-valuemax",r.toString()),e.setAttribute("aria-valuenow",l.toString()),a.setAttribute("aria-label","End of selected range"),a.setAttribute("aria-valuemin",t.toString()),a.setAttribute("aria-valuemax",r.toString()),a.setAttribute("aria-valuenow",i.toString()));let o=X(l),s=X(i);e&&a&&o&&s&&(e.setAttribute("aria-valuetext",o),a.setAttribute("aria-valuetext",s))},0)}}},time:{useUTC:l},colors:f,exporting:{chartOptions:{title:{text:y}},filename:y,csv:{dateFormat:"%Y-%m-%d"}},lang:{accessibility:{chartContainerLabel:y?`${y}. Interactive chart.`:"Interactive chart.",navigator:{groupLabel:`${y} Axis zoom`}}},legend:{enabled:_,symbolRadius:"column"===e||"bar"===e?0:void 0,...j?{align:"right",layout:"vertical",verticalAlign:"middle"}:{}},plotOptions:(0,b.A)({},Z.plotOptions,{series:{marker:{enabled:"sparkline"!==g&&"spline"!==e},enableMouseTracking:"sparkline"!==g}},x),series:S,tooltip:(0,b.A)({},{enabled:"sparkline"!==g,shared:O},D),xAxis:(0,b.A)({},{visible:"sparkline"!==g,gridLineWidth:+("sparkline"!==g),title:{text:"sparkline"!==g?a:void 0}},k),yAxis:L.map(e=>{if(e)return(0,b.A)({},Y,{visible:"sparkline"!==g,gridLineWidth:+("sparkline"!==g),title:{text:"sparkline"!==g?t:void 0}},e)}),...i?{rangeSelector:{enabled:!0,inputEnabled:!1,buttons:[],dropdown:"never"}}:{}},N);if(i&&r.accessibility&&r.accessibility.keyboardNavigation&&(r.accessibility.keyboardNavigation.order=[...r.accessibility?.keyboardNavigation?.order??[],"navigator"]),r.series&&r.colors){let e=0,a=[];for(let t of r.series)if("areaspline"===t.type||"area"===t.type){let l;t.color?l=t.color:(l=r.colors[e],e++),t.fillColor||(t.fillColor={linearGradient:{x1:0,x2:0,y1:0,y2:1},stops:[[0,`color-mix(in srgb, ${l} 25%, transparent)`],[1,`color-mix(in srgb, ${l} 1%, transparent)`]]}),a.push(t),e>r.colors.length-1&&(e=0)}else a.push(t);r.series=a}return r},[e,a,t,l,i,y,g,_,j,O,v,f,x,S,D,k,L,N]);return(0,r.jsx)(F(),{constructorType:M,highcharts:T,ref:v,options:z})},et={auburn:"--display-auburn-scale-6",blue:"--display-blue-scale-4",brown:"--display-brown-scale-5",coral:"--display-coral-scale-5",cyan:"--display-cyan-scale-5",gray:"--display-gray-scale-5",green:"--display-green-scale-4",indigo:"--display-indigo-scale-7",lemon:"--display-lemon-scale-4",lime:"--display-lime-scale-4",olive:"--display-olive-scale-5",orange:"--display-orange-scale-4",pine:"--display-pine-scale-5",pink:"--display-pink-scale-5",plum:"--display-plum-scale-7",purple:"--display-purple-scale-5",red:"--display-red-scale-6",teal:"--display-teal-scale-4",yellow:"--display-yellow-scale-4"},er={green:et.green,blue:et.blue,olive:et.olive,indigo:et.indigo,teal:et.teal,orange:et.orange,yellow:et.yellow,red:et.red,pink:et.pink,plum:et.plum,purple:et.purple},el=({type:e,options:a,series:t,marker:l,labels:i,_privateHasDashStyle:o=!0,...s})=>{let{xAxis:n,yAxis:d,plot:c}=a??{},p=(0,m.useMemo)(()=>I({xAxis:n,gridLineDashStyle:"Solid"}),[n]),u=(0,m.useMemo)(()=>J({yAxis:d,gridLineDashStyle:"Solid"}),[d]),h=(0,m.useMemo)(()=>t?.map((e,a)=>{let t=Object.keys(er),r=t[a%t.length];return{...e,color:e.color?`var(${et[e.color]})`:r?`var(${er[r]})`:void 0}}),[t]),y=(0,m.useMemo)(()=>q({series:h,type:e,hasDashStyle:o}),[h,e,o]),C=(0,m.useMemo)(()=>G({plotOptions:c,marker:l,labels:i}),[c,l,i]);return y.length,(0,r.jsx)(ea,{type:e,xAxisOptions:p,yAxisOptions:u,series:y,plotOptions:C,...s})},ei=e=>(0,r.jsx)(el,{...e,type:"line"});try{el.displayName||(el.displayName="BaseLineChart")}catch{}try{ei.displayName||(ei.displayName="LineChart")}catch{}let eo=e=>(0,r.jsx)(el,{...e,type:"spline"});try{eo.displayName||(eo.displayName="SplineChart")}catch{}let es={green:et.green,teal:et.teal,blue:et.blue,indigo:et.indigo,orange:et.orange},en={green:"--display-green-scale-0",teal:"--display-teal-scale-0",blue:"--display-blue-scale-0",indigo:"--display-indigo-scale-0",orange:"--display-orange-scale-0"},ed=({type:e,options:a,series:t,stacking:l="normal",marker:i,labels:o,_privateHasDashStyle:s=!0,...n})=>{let{xAxis:d,yAxis:c,plot:p}=a??{},u=(0,m.useMemo)(()=>I({xAxis:d,gridLineDashStyle:"Solid"}),[d]),h=(0,m.useMemo)(()=>J({yAxis:c,gridLineDashStyle:"Solid"}),[c]),y=(0,m.useMemo)(()=>t?.map((e,a)=>{let t=Object.keys(es).filter(Boolean),r=t[a%t.length];return{...e,color:e.color?`var(${et[e.color]})`:r?`var(${es[r]})`:void 0,fillColor:e.color?void 0:r?`var(${en[r]})`:void 0}}),[t]),C=(0,m.useMemo)(()=>q({series:y,type:e,hasDashStyle:s}),[y,e,s]),g=(0,m.useMemo)(()=>G({plotOptions:p,marker:i,labels:o,stacking:l}),[i,o,l,p]);return C.length,(0,r.jsx)(ea,{type:e,xAxisOptions:u,yAxisOptions:h,series:C,plotOptions:g,...n})},ec=e=>(0,r.jsx)(ed,{...e,type:"area"});try{ed.displayName||(ed.displayName="BaseAreaChart")}catch{}try{ec.displayName||(ec.displayName="AreaChart")}catch{}let ep=e=>(0,r.jsx)(ed,{...e,type:"areaspline"});try{ep.displayName||(ep.displayName="AreaSplineChart")}catch{}let eu={Solid:"solid",ShortDash:"dashed"},eh=(e,a=!1)=>!1===a?[`var(--display-${e}-scale-8)`,`var(--display-${e}-scale-4)`,`var(--display-${e}-scale-2)`,`var(--display-${e}-scale-1)`,`var(--display-${e}-scale-0)`]:[`var(--display-${e}-scale-9)`,`var(--display-${e}-scale-5)`,{linearGradient:{x1:0,x2:0,y1:1,y2:0},stops:[[.15,`var(--display-${e}-scale-1)`],[.45,`var(--display-${e}-scale-2)`],[1,`var(--display-${e}-scale-4)`]]},{linearGradient:{x1:0,x2:0,y1:1,y2:0},stops:[[0,`var(--display-${e}-scale-0)`],[1,`var(--display-${e}-scale-1)`]]},`var(--display-${e}-scale-0)`],ey={pine:et.pine,teal:et.teal,cyan:et.cyan,blue:et.blue,indigo:et.indigo,purple:et.purple,orange:et.orange},em=({type:e,options:a,series:t,stacking:l,labels:i,colors:o,theme:s,overrideOptionsNotRecommended:n,_privateIncreasedContrast:d,...c})=>{let{xAxis:p,yAxis:u,plot:h}=a??{},y=d??!0,C=(0,m.useMemo)(()=>I({xAxis:p,gridLineWidth:0}),[p]),g=(0,m.useMemo)(()=>((e,a,t=!1)=>eh(a,t).slice(0,e).reverse())(t?.length??0,s??"green",y),[s,t,y]),b=(0,m.useMemo)(()=>(t?.length??0)>1,[t]),v=(0,m.useMemo)(()=>J({yAxis:u,gridLineDashStyle:"Dash"}),[u]),f=(0,m.useMemo)(()=>t?.map((e,a)=>{l&&e.colorByPoint&&console.warn("Stacking is enabled, colorByPoint will be set to false for all series.");let t=JSON.stringify(g[a])===JSON.stringify(eh(s??"green",y)[3]),r=JSON.stringify(g[a])===JSON.stringify(eh(s??"green",y)[4]);return{...e,colorByPoint:!l&&e.colorByPoint,dashStyle:b&&!0===y?t?"ShortDash":r?"Solid":void 0:"Solid",borderColor:b&&(t&&!0===y||r&&!0===y)?`var(--display-${s??"green"}-scale-5)`:void 0}}),[t,l,b,g,s,y]),x=(0,m.useMemo)(()=>q({series:f,type:e,hasDashStyle:!1}),[f,e]),S=(0,m.useMemo)(()=>G({plotOptions:h,labels:i,stacking:l,noBorderRadius:!0}),[i,l,h]);x.length;let k=(0,m.useMemo)(()=>b?g:o?o.map(e=>`var(${et[e]})`):Object.keys(ey).map(e=>`var(${ey[e]})`),[o,b,g]);return(0,r.jsx)(ea,{type:e,xAxisOptions:C,yAxisOptions:v,series:x,plotOptions:S,colors:k,overrideOptionsNotRecommended:{...n,legend:{useHTML:!0,symbolHeight:0,symbolWidth:0,labelFormatter(){return function(e,a,t,r){let l=e[t]??{},i="square",o=r[t]??`var(--display-green-scale-${t})`,s=l.borderColor??void 0,n=l.dashStyle,d=K({color:o,borderColor:s,borderShape:n?eu[n]:void 0,symbol:i}),c=`ChartCardSymbol-${i}`,p=`<span class="${R.ChartCardSymbol} ${R[c]}" style="${d}"></span>`,u=`<span>${a}</span>`;return`${p} ${u}`}(x,this.name,this.index,k)},...n?.legend}},...c})},eC=e=>(0,r.jsx)(em,{...e,type:"column"});try{em.displayName||(em.displayName="BaseColumnChart")}catch{}try{eC.displayName||(eC.displayName="ColumnChart")}catch{}let eg=e=>(0,r.jsx)(em,{...e,type:"bar"});try{eg.displayName||(eg.displayName="BarChart")}catch{}function eb({children:e}){return(0,r.jsx)(d.l.Body,{className:R.ChartCardDialogBody,children:e})}function ev({size:e="medium",border:a,padding:t="normal",visibleControls:v,className:f,children:x,chartRef:k}){let N=v??"sparkline"!==e,$=a??"sparkline"!==e,[_,...w]=(0,c.H)(x,{leadingVisual:g,title:S,description:A,trailingVisual:D,chart:ea}),[j,O]=(0,m.useState)(""),[M,L]=(0,m.useState)(""),T=(0,l.L)(k),z=(0,m.useMemo)(()=>({title:j,setTitle:O,description:M,setDescription:L,size:e,chartRef:T}),[j,O,M,L,e,T]),V=(0,m.useRef)(null),[B,W]=(0,m.useState)(),F=(0,m.useCallback)(()=>W(!0),[]),H=(0,m.useCallback)(()=>W(!1),[]);(0,m.useEffect)(()=>{!1===B&&V.current?.focus()},[B]);let E=(0,m.useCallback)(()=>{let e=new Set;return a=>{let t=a.replace(/\./g,"_"),r=0,l=t;for(;e.has(l);)r++,l=`${t}_${r}`;return e.add(l),l}},[]),P=(0,m.useCallback)(()=>{if(!T.current?.chart)return[];let e=T.current.chart.getDataRows()[0],a=E();return e.map(e=>({originalLabel:e,sanitizedField:a(e)}))},[T,E]),I=(0,m.useCallback)(()=>{if(!T.current?.chart)return[];let[,...e]=T.current.chart.getDataRows(),a=P();return e.map((e,t)=>e.reduce((e,r,l)=>({...e,id:t,[a[l]?.sanitizedField||`field_${l}`]:r}),{}))},[T,P]),J=(0,m.useCallback)(()=>T.current?.chart?P().map((e,a)=>({header:e.originalLabel,field:e.sanitizedField,rowHeader:0===a})):[],[T,P]),q=(0,m.useCallback)(()=>T.current?.chart?.downloadCSV(),[T]),G=(0,m.useCallback)(()=>{T.current?.chart.update({exporting:{chartOptions:{caption:{text:M}}}});let e=JSON.stringify(T.current?.chart?.userOptions,(e,a)=>"string"==typeof a?a.replace(/var\(--([^,)]+)[,)]+/g,(e,a)=>getComputedStyle(T.current?.container.current??document.body).getPropertyValue(`--${a}`).trim()):a);T.current?.chart?.exportChartLocal({type:"image/png"},JSON.parse(e))},[T,M]),K=null,U=(0,m.useMemo)(()=>(0,b.A)({},_.chart?.props?.overrideOptionsNotRecommended||{},{accessibility:{screenReaderSection:{onViewDataTableClick:F}}}),[_.chart?.props?.overrideOptionsNotRecommended,F]);_.chart&&(K=(0,m.cloneElement)(_.chart,{overrideOptionsNotRecommended:U}));let Y=(0,m.useMemo)(()=>!!(_.leadingVisual||_.trailingVisual||N||_.title||_.description),[_.leadingVisual,_.trailingVisual,N,_.title,_.description]);return(0,r.jsxs)(C.Provider,{value:z,children:[(0,r.jsxs)(n.az,{className:f,sx:{...$?{borderWidth:"1px",borderStyle:"solid",borderColor:"border.default",borderRadius:2}:{},p:"none"===t?0:`var(--stack-padding-${t})`},...(0,y.G)("chart-card"),children:[(0,r.jsxs)(n.az,{sx:{display:Y?"flex":"none",mb:3*("sparkline"!==e)},className:R.ChartCardHeaderContainer,children:[(0,r.jsxs)("div",{className:R.ChartCardContentContainer,children:[(0,r.jsx)(n.az,{sx:{mr:2*!!_.leadingVisual},className:R.ChartCardLeadingVisualContainer,children:_.leadingVisual}),(0,r.jsxs)("div",{children:[_.title,_.description]})]}),(0,r.jsxs)("div",{className:R.ChartCardActionsContainer,children:[(0,r.jsx)(n.az,{sx:{mr:2*!!_.leadingVisual},children:_.trailingVisual}),N&&(0,r.jsxs)(i.W,{anchorRef:V,children:[(0,r.jsx)(i.W.Anchor,{children:(0,r.jsx)(o.K,{"aria-label":"Chart options",icon:h.KebabHorizontalIcon,variant:"invisible",size:"small"})}),(0,r.jsx)(i.W.Overlay,{width:"auto",children:(0,r.jsxs)(s.l,{children:[(0,r.jsx)(s.l.Item,{onSelect:F,children:"View as table"}),(0,r.jsx)(s.l.Item,{onSelect:q,children:"Download CSV"}),(0,r.jsx)(s.l.Item,{onSelect:G,children:"Download PNG"})]})})]})]})]}),K??w]}),B&&(0,r.jsx)(d.l,{title:j,onClose:H,footerButtons:[{buttonType:"default",content:"Download CSV",onClick:q}],renderBody:eb,children:(0,r.jsx)(p.X.Container,{className:R.ChartCardTableContainer,children:(0,r.jsx)(u.b,{data:I(),columns:J()})})})]})}ev.displayName="ChartCard";let ef=Object.assign(ev,{LeadingVisual:g,Title:S,Description:A,TrailingVisual:D,Chart:ea,LineChart:ei,ColumnChart:eC,BarChart:eg,AreaChart:ec,AreaSplineChart:ep,SplineChart:eo,Context:C});try{eb.displayName||(eb.displayName="DialogBodyWithoutPadding")}catch{}try{ef.displayName||(ef.displayName="ChartCard")}catch{}}}]);
//# sourceMappingURL=packages_chart-card_ChartCard_tsx-d852fcb9e7b0.js.map